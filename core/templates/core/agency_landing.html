{% load static %}
<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ agency.name }}</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700&family=Playfair+Display:ital,wght@0,600;1,600&display=swap" rel="stylesheet">
    <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet">
    <style>
        body { font-family: 'Plus Jakarta Sans', sans-serif; }
        h1, h2, h3, .serif { font-family: 'Playfair Display', serif; }
        
        /* COLOR SAFETY LOGIC */
        /* If primary is missing, default to Blue. */
        .text-primary { color: {{ agency.primary_color|default:"#2563EB" }}; }
        .bg-primary { background-color: {{ agency.primary_color|default:"#2563EB" }}; }
        
        /* If secondary is missing OR White, default to Dark Slate (#0f172a) so text is visible */
        .bg-secondary { background-color: {% if agency.secondary_color == '#ffffff' or not agency.secondary_color %}#0f172a{% else %}{{ agency.secondary_color }}{% endif %}; }
        .text-secondary { color: {% if agency.secondary_color == '#ffffff' or not agency.secondary_color %}#0f172a{% else %}{{ agency.secondary_color }}{% endif %}; }

        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    </style>
</head>
<body class="bg-white text-slate-900">

    <nav class="fixed w-full z-50 bg-white/95 backdrop-blur-md border-b border-slate-100 transition-all duration-300">
        <div class="max-w-7xl mx-auto px-6 h-20 flex items-center justify-between">
            <div class="flex items-center gap-3">
                {% if agency.logo %}
                    <img src="{{ agency.logo.url }}" alt="{{ agency.name }}" class="h-10 w-auto">
                {% else %}
                    <span class="serif font-bold text-2xl tracking-tight text-slate-900">{{ agency.name }}</span>
                {% endif %}
            </div>
            <div class="hidden md:flex gap-8 text-sm font-bold text-slate-600">
                <a href="#about" class="hover:text-primary transition">About</a>
                <a href="#team" class="hover:text-primary transition">Our Team</a>
                <a href="#careers" class="hover:text-primary transition">Careers</a>
            </div>
            <a href="#contact" class="bg-primary text-white px-6 py-2.5 rounded-full font-bold text-sm hover:brightness-110 transition">
                Get in Touch
            </a>
        </div>
    </nav>

    <section class="relative pt-32 pb-20 lg:pt-48 lg:pb-32 overflow-hidden">
        <div class="max-w-7xl mx-auto px-6 grid lg:grid-cols-2 gap-12 items-center">
            <div class="relative z-10">
                <span class="text-primary font-bold tracking-widest uppercase text-xs mb-6 block">Premier Financial Agency</span>
                
                <h1 class="text-5xl lg:text-7xl font-bold text-slate-900 leading-tight mb-6">
                    {{ agency.hero_headline|default:"Securing Futures, Building Legacies." }}
                </h1>
                <p class="text-xl text-slate-500 mb-10 leading-relaxed max-w-lg">
                    {{ agency.hero_subheadline|default:"We provide comprehensive financial planning to help you achieve your life goals." }}
                </p>
                
                <div class="flex flex-wrap gap-4">
                    <a href="#team" class="bg-secondary text-white px-8 py-4 rounded-full font-bold hover:brightness-110 transition flex items-center gap-2">
                        Meet Our Team <i class='bx bx-right-arrow-alt'></i>
                    </a>
                    <a href="#careers" class="bg-white text-slate-900 border border-slate-200 px-8 py-4 rounded-full font-bold hover:bg-slate-50 transition">
                        Join Us
                    </a>
                </div>
            </div>
            <div class="relative">
                {% if agency.hero_image %}
                    <img src="{{ agency.hero_image.url }}" class="rounded-[2rem] shadow-2xl rotate-2 hover:rotate-0 transition duration-700">
                {% else %}
                    <div class="bg-slate-100 rounded-[2rem] aspect-[4/3] flex flex-col items-center justify-center text-slate-400 border-2 border-dashed border-slate-200">
                        <i class='bx bxs-image text-6xl mb-2'></i>
                        <span class="font-bold text-sm">Upload Hero Image in Dashboard</span>
                    </div>
                {% endif %}
            </div>
        </div>
    </section>

    <section id="about" class="py-20 bg-slate-50">
        <div class="max-w-7xl mx-auto px-6 grid md:grid-cols-2 gap-16">
            <div>
                <h2 class="text-3xl font-serif font-bold mb-6">Who We Are</h2>
                <div class="text-slate-600 leading-relaxed space-y-4">
                    {{ agency.about_text|default:"Welcome to our agency. We are dedicated to providing the best financial advice."|linebreaks }}
                </div>
            </div>
            <div>
                <h2 class="text-3xl font-serif font-bold mb-6">Our Core Values</h2>
                <div class="bg-white p-8 rounded-3xl shadow-sm border border-slate-100">
                    <div class="text-slate-600 leading-relaxed font-medium italic">
                        "{{ agency.values_text|default:"Integrity, Excellence, Compassion."|linebreaks }}"
                    </div>
                </div>
            </div>
        </div>
    </section>

    {% if gallery %}
    <section class="py-20 overflow-hidden border-t border-slate-100">
        <div class="max-w-7xl mx-auto px-6 mb-10 text-center">
            <h2 class="text-3xl font-bold mb-2">Life at {{ agency.name }}</h2>
            <p class="text-slate-500">Moments from our journey together.</p>
        </div>
        <div class="flex gap-6 overflow-x-auto px-6 pb-8 no-scrollbar snap-x">
            {% for img in gallery %}
            <div class="snap-center shrink-0 w-80 h-96 rounded-2xl overflow-hidden relative shadow-md">
                <img src="{{ img.image.url }}" class="w-full h-full object-cover">
                {% if img.caption %}
                <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-6 pt-20">
                    <p class="text-white font-bold text-sm">{{ img.caption }}</p>
                </div>
                {% endif %}
            </div>
            {% endfor %}
        </div>
    </section>
    {% endif %}

    {% if fc_reviews %}
    <section id="careers" class="py-20 bg-secondary text-white">
        <div class="max-w-7xl mx-auto px-6">
            <div class="text-center mb-16">
                <span class="text-primary font-bold tracking-widest uppercase text-xs">Careers</span>
                <h2 class="text-4xl font-serif font-bold mt-2">Hear from our Consultants</h2>
            </div>
            
            <div class="grid md:grid-cols-3 gap-8">
                {% for rev in fc_reviews %}
                <div class="bg-white/10 p-8 rounded-3xl backdrop-blur-sm border border-white/10">
                    <div class="flex items-center gap-4 mb-6">
                        {% if rev.fc_photo %}
                            <img src="{{ rev.fc_photo.url }}" class="w-14 h-14 rounded-full object-cover border-2 border-primary">
                        {% else %}
                            <div class="w-14 h-14 rounded-full bg-white/20 flex items-center justify-center font-bold text-xl">{{ rev.fc_name|slice:":1" }}</div>
                        {% endif %}
                        <div>
                            <h4 class="font-bold text-lg leading-tight">{{ rev.fc_name }}</h4>
                            <p class="text-xs text-white/60 uppercase tracking-wide">{{ rev.fc_role }}</p>
                        </div>
                    </div>
                    <p class="text-white/80 italic leading-relaxed">"{{ rev.review_text }}"</p>
                </div>
                {% endfor %}
            </div>
        </div>
    </section>
    {% endif %}

    <section id="team" class="py-20 bg-slate-50">
        <div class="max-w-7xl mx-auto px-6">
            <div class="text-center mb-16">
                <h2 class="text-4xl font-bold mb-4">Meet Our Team</h2>
                <p class="text-slate-500">Connect with a consultant who understands your needs.</p>
            </div>

            {% if team %}
            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                {% for agent in team %}
                <a href="https://{{ agent.slug }}.{{ agency.domain|default:'skandage.com' }}" target="_blank" class="group bg-white p-6 rounded-2xl shadow-sm hover:shadow-xl transition duration-300 border border-slate-100 block h-full">
                    <div class="flex items-center gap-4 mb-4">
                        {% if agent.headshot %}
                            <img src="{{ agent.headshot.url }}" class="w-16 h-16 rounded-full object-cover">
                        {% else %}
                            <div class="w-16 h-16 rounded-full bg-slate-100 flex items-center justify-center text-2xl font-serif font-bold text-slate-400">
                                {{ agent.name|slice:":1" }}
                            </div>
                        {% endif %}
                        <div>
                            <h3 class="font-bold text-lg text-slate-900 group-hover:text-primary transition">{{ agent.name }}</h3>
                            <p class="text-xs font-bold text-slate-400 uppercase tracking-wide">{{ agent.title }}</p>
                        </div>
                    </div>
                    <p class="text-slate-500 text-sm line-clamp-2 mb-4">"{{ agent.tagline }}"</p>
                    <div class="text-primary font-bold text-sm flex items-center gap-1 group-hover:gap-2 transition-all">
                        View Profile <i class='bx bx-right-arrow-alt'></i>
                    </div>
                </a>
                {% endfor %}
            </div>
            {% else %}
            <div class="text-center py-10 border-2 border-dashed border-slate-200 rounded-2xl">
                <p class="text-slate-400 font-medium">No agents currently linked to this domain.</p>
                <p class="text-xs text-slate-300 mt-2">Go to Admin > Agents > Edit Agent > Set "Custom Domain" to {{ agency.domain }}</p>
            </div>
            {% endif %}
        </div>
    </section>

    <footer id="contact" class="bg-slate-900 text-white py-20">
        <div class="max-w-7xl mx-auto px-6 grid md:grid-cols-2 gap-12">
            <div>
                <h2 class="text-3xl font-serif font-bold mb-6">{{ agency.name }}</h2>
                <div class="space-y-4 text-slate-400">
                    {% if agency.address %}<p><i class='bx bxs-map mr-2'></i> {{ agency.address }}</p>{% endif %}
                    {% if agency.email %}<p><i class='bx bxs-envelope mr-2'></i> {{ agency.email }}</p>{% endif %}
                    {% if agency.phone %}<p><i class='bx bxs-phone mr-2'></i> {{ agency.phone }}</p>{% endif %}
                </div>
            </div>
            <div class="text-right flex flex-col justify-end">
                <p class="text-slate-600 text-sm">&copy; {% now "Y" %} {{ agency.name }}. All rights reserved.</p>
                <p class="text-slate-700 text-xs mt-2">Powered by Skandage</p>
            </div>
        </div>
    </footer>

    {% if agency.whatsapp_number %}
    <a href="https://wa.me/{{ agency.whatsapp_number }}" target="_blank" class="fixed bottom-8 right-8 w-14 h-14 bg-[#25D366] text-white rounded-full flex items-center justify-center text-3xl shadow-2xl hover:-translate-y-1 transition z-50">
        <i class='bx bxl-whatsapp'></i>
    </a>
    {% endif %}

</body>
</html>